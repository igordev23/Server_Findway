{% extends "layouts/base.html" %}

{% block title %}Pagamento pendente{% endblock title %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <h3 class="mb-3">Pagamento mensal pendente</h3>
          <p class="text-muted mb-4">
            Sua mensalidade está com pagamento pendente. Para continuar utilizando o sistema, efetue o pagamento abaixo.
          </p>
          <div class="mb-3">
            <label class="form-label">Plano atual</label>
            <select id="selectPlano" class="form-select"></select>
          </div>
          <button id="btnPagarAgora" class="btn btn-primary me-2">
            Pagar mensalidade
          </button>
          <button id="btnRecarregarPlanos" class="btn btn-outline-secondary">Recarregar</button>
          <div id="feedbackPagamento" class="mt-3 text-muted"></div>
          <div id="stripe-data" data-price-id="{{ STRIPE_DEFAULT_PRICE_ID or '' }}"></div>
          <hr class="my-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
             <small class="text-muted">Logado como: <span id="userEmailDisplay">...</span></small>
             <a href="#" onclick="doLogout(event)" class="text-decoration-none text-danger small">
               <i class="bi bi-box-arrow-right"></i> Não é você? Sair
             </a>
          </div>
          <div class="alert alert-info">
            <h6><i class="bi bi-info-circle"></i> Importante</h6>
            <p class="mb-0">
              Este é um pagamento mensal recorrente. Após o pagamento, sua assinatura será ativada 
              automaticamente e o valor será cobrado mensalmente.
            </p>
          </div>
          <div id="adminArea" class="d-none">
            <h5 class="mb-3">Configurar planos (admin)</h5>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Nome do produto</label>
                <input id="novoPlanoNome" type="text" class="form-control" placeholder="Plano Mensal">
              </div>
              <div class="col-md-6">
                <label class="form-label">Valor (R$)</label>
                <input id="novoPlanoValor" type="number" step="0.01" class="form-control" placeholder="49.90">
              </div>
            </div>
            <div class="mt-3">
              <button id="btnCriarPlano" class="btn btn-success">Criar plano</button>
              <span id="feedbackCriarPlano" class="ms-3 text-muted"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-4">
   
  </div>
  
</div>
{% endblock content %}

{% block javascripts %}
<script src="{{ url_for('static', filename='assets/js/payments/pagamento_pendente.js') }}"></script>
{% endblock javascripts %}
